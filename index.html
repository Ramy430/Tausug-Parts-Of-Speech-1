<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tausug Parts of Speech</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Additional styles for dictionary */
        .dictionary-section {
            margin-top: 40px;
            border-top: 2px solid var(--border-color);
            padding-top: 30px;
        }
        
        .dictionary-btn {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
            color: white;
            font-size: 1.2rem;
            padding: 20px;
            margin-bottom: 30px;
            width: 100%;
        }
        
        .dictionary-btn:hover {
            background: #2f855a;
            border-color: #2f855a;
        }
        
        /* Single display space for dictionary */
        #dictionaryContainer {
            background: var(--background-white);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-md);
        }
        
        .search-box {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(44, 82, 130, 0.1);
        }
        
        .dictionary-stats {
            background: var(--background-light);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .part-badge {
            display: inline-block;
            padding: 4px 8px;
            background: var(--primary-light);
            color: white;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        /* Results container - SINGLE DISPLAY SPACE */
        #resultsContainer {
            min-height: 400px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-medium);
        }
        
        .no-results i {
            font-size: 4rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }
        
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: var(--primary-color);
        }
        
        .loading i {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        /* Hide initial content when dictionary is open */
        .content-area.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tausug Parts of Speech</h1>
            <p class="subtitle">Explore the grammatical building blocks of the Tausug language, spoken primarily in the Sulu Archipelago of the Philippines. Click on any part of speech to learn more about its usage and examples.</p>
        </header>
        
        <div class="buttons-container">
            <a href="parts/ngan.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-file-signature"></i>
                Ngan (Noun)
            </a>
            <a href="parts/ganti.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-user"></i>
                Ganti'ngan (Pronoun)
            </a>
            <a href="parts/piil.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-running"></i>
                Pi'il (Verb)
            </a>
            <a href="parts/papata.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-pen-alt"></i>
                Papata (Adjective)
            </a>
            <a href="parts/kahantang.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-clock"></i>
                Kahantang (Adverb)
            </a>
            <a href="parts/parbutangan.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-map-marker-alt"></i>
                Parbutangan (Preposition)
            </a>
            <a href="parts/panglangkum.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-link"></i>
                Panglangkum (Conjunction)
            </a>
            <a href="parts/pangtarsanggang.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-exclamation-circle"></i>
                Pangtarsanggang (Interjection)
            </a>
            <a href="parts/hurop.html" class="speech-btn" target="_blank">
                <i class="btn-icon fas fa-hashtag"></i>
                Hurop (Article)
            </a>
        </div>
        
        <!-- Initial welcome content -->
        <div class="content-area" id="initialContent">
            <div class="initial-content">
                <i class="fas fa-language"></i>
                <h2>Tausug Language Grammar</h2>
                <p>Welcome to this interactive guide to Tausug parts of speech. The Tausug language is an Austronesian language spoken by the TausÅ«g people in the Philippines, Malaysia, and Indonesia.</p>
                <p>Click on any of the buttons above to open a detailed page for that part of speech in a new tab, or use the Dictionary button below to search all words.</p>
            </div>
        </div>
        
        <!-- Dictionary section -->
        <div class="dictionary-section">
            <button class="speech-btn dictionary-btn" id="dictionaryBtn">
                <i class="btn-icon fas fa-book-open"></i>
                Open Dictionary (All Words)
            </button>
            
            <!-- Single display space for dictionary -->
            <div id="dictionaryContainer" style="display: none;">
                <div class="dictionary-stats">
                    <strong id="totalEntries">0</strong> entries in dictionary
                </div>
                
                <input type="text" class="search-box" id="searchInput" placeholder="Search in Tausug or English...">
                
                <!-- SINGLE RESULTS CONTAINER -->
                <div id="resultsContainer">
                    <!-- Results will appear here -->
                </div>
            </div>
        </div>
        
        <footer>
            <p>Learn Tausug Grammar | Interactive Language Guide</p>
        </footer>
    </div>

    <script>
        // Dictionary functionality
        const dictionaryBtn = document.getElementById('dictionaryBtn');
        const dictionaryContainer = document.getElementById('dictionaryContainer');
        const initialContent = document.getElementById('initialContent');
        const resultsContainer = document.getElementById('resultsContainer');
        const searchInput = document.getElementById('searchInput');
        const totalEntriesSpan = document.getElementById('totalEntries');
        
        let allEntries = [];
        let currentSearch = '';
        
        // Part mapping for display
        const partDisplay = {
            'ngan': 'Noun',
            'ganti': 'Pronoun',
            'piil': 'Verb',
            'papata': 'Adjective',
            'kahantang': 'Adverb',
            'parbutangan': 'Preposition',
            'panglangkum': 'Conjunction',
            'pangtarsanggang': 'Interjection',
            'hurop': 'Article'
        };
        
        // File mapping
        const partToFile = {
            'ngan': 'json/ngan.json',
            'ganti': 'json/gantingan.json',
            'piil': 'json/piil.json',
            'papata': 'json/papata.json',
            'kahantang': 'json/kahantang.json',
            'parbutangan': 'json/parbutangan.json',
            'panglangkum': 'json/panglangkum.json',
            'pangtarsanggang': 'json/pangtarsanggang.json',
            'hurop': 'json/hurop.json'
        };
        
        dictionaryBtn.addEventListener('click', function() {
            if (dictionaryContainer.style.display === 'none') {
                // Hide initial content, show dictionary
                initialContent.style.display = 'none';
                dictionaryContainer.style.display = 'block';
                dictionaryBtn.innerHTML = '<i class="btn-icon fas fa-book-open"></i> Close Dictionary';
                loadAllEntries();
            } else {
                // Show initial content, hide dictionary
                initialContent.style.display = 'block';
                dictionaryContainer.style.display = 'none';
                dictionaryBtn.innerHTML = '<i class="btn-icon fas fa-book-open"></i> Open Dictionary (All Words)';
                resultsContainer.innerHTML = ''; // Clear results
                searchInput.value = ''; // Clear search
            }
        });
        
        searchInput.addEventListener('input', function() {
            currentSearch = this.value.toLowerCase();
            filterAndDisplayEntries();
        });
        
        async function loadAllEntries() {
            resultsContainer.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i><p>Loading dictionary...</p></div>';
            
            allEntries = [];
            
            for (const [part, file] of Object.entries(partToFile)) {
                try {
                    const response = await fetch(file);
                    const data = await response.json();
                    
                    const entriesWithPart = (data.vocabulary || []).map(entry => ({
                        ...entry,
                        part: part,
                        partDisplay: partDisplay[part]
                    }));
                    
                    allEntries = [...allEntries, ...entriesWithPart];
                } catch (error) {
                    console.error(`Error loading ${file}:`, error);
                }
            }
            
            totalEntriesSpan.textContent = allEntries.length;
            
            // Show all entries initially
            displayEntries(allEntries);
        }
        
        function filterAndDisplayEntries() {
            if (!currentSearch) {
                displayEntries(allEntries);
                return;
            }
            
            const filtered = allEntries.filter(entry => 
                entry.tausug.toLowerCase().includes(currentSearch) ||
                entry.english.toLowerCase().includes(currentSearch) ||
                (entry.definition && entry.definition.toLowerCase().includes(currentSearch))
            );
            
            displayEntries(filtered);
        }
        
        function displayEntries(entries) {
            if (entries.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <h3>No entries found</h3>
                        <p>Try a different search term.</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="results-grid">';
            entries.forEach(entry => {
                html += `
                <div class="word-card">
                    <div class="word-header">
                        <h3 class="tausug-word">${entry.tausug}</h3>
                        ${entry.pronunciation ? `<span class="pronunciation">${entry.pronunciation}</span>` : ''}
                    </div>
                    <p class="english-word">
                        <em>${entry.english}</em>
                        <span class="part-badge">${entry.partDisplay}</span>
                    </p>
                    ${entry.definition ? `<p class="definition">${entry.definition}</p>` : ''}
                    ${entry.examples ? generateExamplesHTML(entry.examples) : ''}
                    ${entry.notes ? `<div class="notes"><strong>Note:</strong> ${entry.notes}</div>` : ''}
                </div>
                `;
            });
            html += '</div>';
            
            resultsContainer.innerHTML = html;
        }
        
        function generateExamplesHTML(examples) {
            if (!examples || examples.length === 0) return '';
            
            let html = '<div class="examples"><h4>Examples:</h4><ul>';
            examples.slice(0, 2).forEach(ex => {
                html += `
                    <li>
                        <p class="example-tausug">${ex.tausug}</p>
                        <p class="example-english">${ex.english}</p>
                    </li>
                `;
            });
            if (examples.length > 2) {
                html += `<li><em>+${examples.length - 2} more examples</em></li>`;
            }
            html += '</ul></div>';
            return html;
        }
    </script>
</body>
</html>
